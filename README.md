# 游泳馆会员管理系统

## 项目概述

本项目是一个基于 Spring Boot + Vue 的游泳馆会员管理系统，系统以游泳馆日常运营为背景，主要实现会员信息管理、课程预约、入场管理、教练管理及基础统计分析等功能。系统通过角色划分与权限控制，实现不同用户对系统功能的合理使用，提升游泳馆管理效率与服务规范性。系统整体功能设计遵循"实用为主、实现可控"的原则，重点体现毕业设计的完整性和可实现性。

系统主要面向两类用户：
- **管理员（含前台管理人员）**：负责系统的整体管理与维护，管理会员、课程、教练等基础数据，查看入场记录与运营统计信息
- **会员用户**：通过账号登录系统，查看和维护个人信息，预约课程、进行扫码入场，查询个人使用记录
- **非会员用户**：可查看和修改个人信息，预览部分公共信息

## 技术栈

### 后端技术栈
- **框架**: Spring Boot 2.7.6
- **语言**: Java 8
- **持久层**: MyBatis Plus
- **数据库**: MySQL 8.0
- **缓存**: Redis 3.2.100
- **安全框架**: Spring Security
- **认证授权**: JWT Token
- **API文档**: Swagger2 / Knife4j
- **其他**: Maven构建工具

### 前端技术栈
- **框架**: Vue.js 3.x
- **UI组件库**: Element Plus
- **路由**: Vue Router 4.x
- **状态管理**: Pinia
- **HTTP客户端**: Axios
- **构建工具**: Vite
- **其他**: qrcode、vue-qrcode-reader等

### 开发环境
- **操作系统**: Windows
- **开发工具**: IDEA / VSCode
- **版本控制**: Git

## 系统架构

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   浏览器        │    │   Web服务器     │    │   数据库        │
│                │    │                │    │                │
│  Vue前端       │◄──►│  Spring Boot   │◄──►│  MySQL         │
│  - 用户界面     │    │  - REST API    │    │  - 数据存储    │
│  - 业务逻辑     │    │  - 业务处理    │    │  - 关系型数据  │
│  - 路由管理     │    │  - 安全认证    │    │                │
└─────────────────┘    └─────────────────┘    └─────────────────┘
```

本系统采用前后端分离架构设计，前端使用Vue.js构建用户界面，通过RESTful API与后端Spring Boot服务通信，后端提供统一的API接口并处理业务逻辑，数据存储于MySQL数据库中。

## 功能模块

### 1. 用户认证与权限管理模块
- **用户注册/登录**: 支持账号密码方式登录系统
- **角色权限控制**: 根据管理员和会员角色限制功能访问范围
- **登录状态管理**: 前端通过登录状态判断页面访问权限
- **密码安全管理**: 后端采用MD5加密方式存储用户密码
- **防止越权操作**: 通过角色信息限制用户功能访问范围

### 2. 会员信息管理模块
- **会员信息维护**: 管理员可新增、修改、查询和删除会员信息
- **会员资料管理**: 包括会员基本资料、会员类型、会员状态等
- **会员状态控制**: 支持会员启用、停用管理，处理会员到期或异常情况
- **个人信息管理**: 普通会员仅可查看和修改自身部分信息
- **会员数据集中管理**: 为课程预约和入场管理提供数据支撑

### 3. 教练信息管理模块
- **教练信息录入**: 管理员可录入教练基本信息
- **教练资料维护**: 包括姓名、联系方式、擅长项目及授课状态
- **课程关联管理**: 教练信息主要服务于课程安排与预约功能
- **简化权限设计**: 教练以"被管理对象"存在，避免权限复杂度

### 4. 课程管理与预约模块
- **课程信息发布**: 管理员负责课程的发布、修改与下架操作
- **课程信息维护**: 包括课程名称、课程时间、课程容量及对应教练
- **课程预约功能**: 普通会员可查看课程列表并进行预约
- **课程容量校验**: 预约时校验课程容量，防止超额预约
- **预约记录管理**: 会员查看个人预约，管理员查看全部预约信息

### 5. 场馆入场管理模块
- **二维码生成**: 会员通过系统生成个人入场二维码
- **扫码入场验证**: 前端扫描二维码，后端校验会员状态
- **入场权限判断**: 根据会员状态决定是否允许入场
- **本地环境支持**: 可在本地环境下运行，不依赖外部网络
- **入场记录生成**: 记录会员入场时间等信息

### 6. 非会员与会员区分管理
- **角色区分**: 明确区分会员与非会员角色
- **权限差异**: 非会员仅可浏览公开信息，不具备预约和入场权限
- **状态校验机制**: 仅有效状态会员可预约课程和扫码入场
- **双重校验**: 通过角色与状态双重校验保证业务逻辑合理性

### 7. 游泳记录与使用记录模块
- **入场记录生成**: 每次入场后生成对应的入场记录
- **记录信息维护**: 包括入场时间、会员信息等
- **使用情况查询**: 管理员可查看会员使用情况
- **运营管理支持**: 用于日常运营管理和统计分析

### 8. 统计分析与数据展示模块
- **会员数量统计**: 统计系统中的会员总数
- **课程预约统计**: 统计各课程预约情况
- **入场次数统计**: 统计入场总次数和趋势
- **数据可视化展示**: 通过列表或简单图表展示统计结果
- **运营情况概览**: 帮助管理员了解系统整体使用情况

### 9. 系统管理与基础配置模块
- **账号管理**: 管理员进行账号相关操作
- **基础数据维护**: 维护系统基础配置数据
- **系统配置功能**: 供管理员进行系统维护操作
- **运行稳定性保障**: 保证系统运行的稳定性和管理便利性

## 系统角色与权限

### 管理员（Admin）
- 可访问所有管理功能
- 可管理会员、课程、教练、预约等数据
- 可查看统计报表和运营数据
- 可进行系统配置和基础数据维护
- 可管理所有入场记录

### 会员（Member）
- 可查看和修改个人信息
- 可预约课程
- 可查看自己的预约记录
- 可获取入场二维码
- 可查看个人使用记录和入场历史

### 非会员（NoMember）
- 可查看和修改个人信息
- 可预览公共模块的信息（比如前端首页等）

## 核心业务流程

### 0. 非会员处理流程
- 非会员仅可浏览部分公开信息
- 非会员无法进行课程预约操作
- 非会员无法进行扫码入场操作
- 系统通过角色和状态控制功能访问权限

### 1. 会员预约流程
1. 会员登录系统
2. 浏览可用课程列表
3. 查看课程详情
4. 选择并预约课程（系统验证课程容量和会员状态）
5. 获取预约确认信息
6. 课程开始前生成入场二维码

### 2. 会员入场流程
1. 会员向前台展示入场二维码
2. 前台人员使用系统扫描二维码
3. 系统验证会员状态和预约信息
4. 验证通过后允许入场
5. 系统记录入场时间和相关信息

### 3. 非会员处理
- 非会员状态的账户无法预约课程
- 非会员账户无法进行扫码入场
- 系统通过角色和状态控制功能访问权限

### 4. 教练管理流程
1. 管理员录入教练基本信息
2. 将教练与课程进行关联
3. 会员在预约课程时可查看对应教练信息
4. 教练无需登录系统，作为被管理对象存在

## 项目特点

- **前后端分离**: 采用前后端分离架构，便于开发和维护
- **响应式设计**: 支持PC端和移动端访问
- **权限控制**: 完善的角色权限管理体系，区分管理员、会员和非会员权限
- **数据安全**: 使用JWT进行身份验证，密码使用MD5加密保障数据安全
- **易于扩展**: 模块化设计，便于后续功能扩展
- **本地部署**: 适合本地开发和演示，无需依赖第三方服务
- **功能完整**: 覆盖用户认证、会员管理、课程预约、入场管理、统计分析等完整业务流程
- **实用性强**: 针对游泳馆实际运营场景设计，具有实际应用价值
- **标准化API**: 遵循RESTful API设计规范，统一的返回格式
- **完善的用户管理**: 包含登录、登出、用户信息获取等基础功能
- **统一的错误处理**: 提供统一的错误处理机制和异常响应格式

## 开发规范

#### 包命名规范
- 后端包结构: `com.swimmingsys.{module}.{layer}`
  - 例如: `com.swimmingsys.member.controller`、`com.swimmingsys.course.service`
- 前端组件命名: 采用大驼峰命名法，如 `MemberInfo.vue`、`CourseList.vue`

#### 类/方法命名规范
- 类名使用大驼峰命名法 (UpperCamelCase)
- 方法名使用小驼峰命名法 (lowerCamelCase)
- 常量全部大写，单词间用下划线分隔(比如USER_NAME)
- 接口实现类使用 `Impl` 后缀

#### Java代码规范
- 使用空格缩进（4个空格），禁止使用Tab
- 类和方法之间用单行空行分隔
- 注释使用中文，重要注释使用JavaDoc格式
- 优先使用@Resource注解进行依赖注入，而非@Autowired
- 实体类放置在model.entity包下，而非直接放在entity包

#### 数据库表命名规范
- 表名全部小写，单词间用下划线分隔
- 主键统一使用 `id`
- 时间字段使用 `created_time`、`updated_time` 格式
- 有关用户角色的表中必须有is_delete逻辑删除字段
- 外键字段使用 `{table}_id` 格式

### 数据库设计规范

#### 字段类型规范
- 主键使用BIGINT类型
- 文本字段优先使用VARCHAR，长度根据实际需要设定
- 日期时间使用DATETIME类型
- 状态字段使用TINYINT类型
- 数值字段根据范围选择合适类型

#### 实体类设计规范
- 实体类统一放置在model.entity包下
- 使用Lombok的@Data注解减少样板代码
- 使用MyBatis-Plus注解如@TableId、@TableName等
- 逻辑删除字段使用@TableLogic注解

#### 索引规范
- 主键自动创建索引
- 外键字段建立索引
- 经常用于查询的字段建立索引
- 避免过多索引影响写入性能

### 代码风格
-- 操作数据库时，使用QueryWrapper类来写需要查询的sql语句
--  Controller 不直接访问数据库，必须走 Service
-- 实体类用@Data(引入lombok依赖)注解简化多余代码
-- 安全配置中使用JWT进行身份验证，密码使用MD5加密
-- 使用@Resource注解注入依赖


#### Vue代码规范
- 使用Composition API
- 组件props定义使用具体类型和默认值
- 使用ESLint和Prettier进行代码格式化
- 组件内部按模板、脚本、样式顺序组织


### API设计规范

#### RESTful API设计
- GET /api/v1/members - 获取会员列表
- POST /api/v1/members - 创建会员
- GET /api/v1/members/{id} - 获取指定会员
- PUT /api/v1/members/{id} - 更新指定会员
- DELETE /api/v1/members/{id} - 删除指定会员

#### 返回格式规范
```
{
  "success": true,
  "code": 200,
  "message": "操作成功",
  "data": {}
}
```

#### 错误码规范
- 200: 成功
- 400: 请求参数错误
- 401: 未授权
- 403: 权限不足
- 404: 资源不存在
- 500: 服务器内部错误

### 安全规范

#### 密码安全
- 会员密码必须经过MD5加密后再存储
- 推荐使用MD5进行密码加密
- 禁止明文存储密码敏感信息

#### 权限控制
- 所有接口都需要进行权限验证
- 使用JWT进行身份认证
- 不同角色访问不同的功能模块
- 对关键操作进行二次验证

#### SQL注入防护
- 使用MyBatis Plus的预编译语句
- 禁止拼接SQL字符串
- 对用户输入进行严格校验

### 业务逻辑规范

#### 会员状态管理
- 会员状态变更必须记录变更日志
- 非会员不能进行预约和入场操作
- 会员状态实时校验，确保业务一致性

#### 课程预约限制
- 课程预约必须校验课程容量
- 预约前需校验会员状态
- 预约时间冲突检测

#### 入场验证流程
- 入场前必须验证会员有效性
- 验证会员预约状态
- 记录入场记录

### 项目结构规范

#### 后端项目结构
```
sql                 #用于存放sql创建语句
src/main/java/com/swimmingsys/
├── SwimmingSysApplication.java
├── common/          # 公共类
├── config/          # 配置类
├── controller/      # 控制器层
├── mapper/          # 数据访问层
├── model/           # 数据模型层
│   └── entity/      # 实体类
│       ├── dto/     # 数据传输对象
│       └── vo/      # 视图对象    
├── service/         # 业务逻辑层
│   └── impl/        # 业务逻辑实现
└── utils/           # 工具类(MD5加密等)
```

#### 前端项目结构
```
src/
├── components/      # 公共组件
├── views/           # 页面视图
├── layout/          # 布局组件
├── router/          # 路由配置
├── store/           # 状态管理
├── api/             # API接口
├── utils/           # 工具函数
└── assets/          # 静态资源
```

### 测试规范

#### 单元测试
- 业务逻辑方法必须编写单元测试
- 测试覆盖率不低于80%
- 使用JUnit 5进行测试

#### 接口测试
- 所有API接口需要进行功能测试
- 使用Swagger进行接口测试
- 验证正常和异常情况下的返回结果

### 部署规范

#### 环境配置
- 开发环境: application-dev.yml
- 测试环境: application-test.yml
- 生产环境: application-prod.yml

### 开发注意事项
- 在进行任何开发前，确保理解业务逻辑和用户角色关系
- 所有接口都要进行权限校验，防止未授权访问
- 数据库操作必须考虑事务处理，确保数据一致性
- 对于并发操作（如课程预约），要考虑并发安全问题
- 前端表单提交前进行必要校验，后端再次校验
- 合理使用缓存，提高系统性能
- 记录必要的操作日志，便于问题追踪和调试

### 常见问题修复


## 项目启动和部署

### 环境准备
- JDK 8+ 
- Node.js 16
- MySQL 8.0
- Maven 3.9.9
- Redis 3.2.100


#前端设计风格

1. 界面要求：
   - 简洁现代的设计风格
   - 使用清新的蓝色调
   - 圆角按钮和输入框
   - 适当的阴影效果
   - 响应式设计，手机上也能正常使用
